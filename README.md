# Light-pollution-and-pond-soundscapes

```
#Calculate acoustic indices 

####OSP####

#Dark 1 

multiple_sounds("OSP Dark 1", resultfile = "OSP Dark 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("OSP Dark 1", resultfile = "OSP Dark 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("OSP Dark 1", resultfile = "OSP Dark 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("OSP Dark 1", resultfile = "OSP Dark 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("OSP Dark 1", resultfile = "OSP Dark 1 H.csv",
                soundindex = "H")

multiple_sounds("OSP Dark 1", resultfile = "OSP Dark 1 NDSI.csv",
                soundindex = "ndsi")

#Light 1

multiple_sounds("OSP Light 1", resultfile = "OSP Light 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("OSP Light 1", resultfile = "OSP Light 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("OSP Light 1", resultfile = "OSP Light 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("OSP Light 1", resultfile = "OSP Light 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("OSP Light 1", resultfile = "OSP Light 1 H.csv",
                soundindex = "H")

multiple_sounds("OSP Light 1", resultfile = "OSP Light 1 NDSI.csv",
                soundindex = "ndsi")

#Dark 2
multiple_sounds("OSP Dark 2", resultfile = "OSP Dark 2 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("OSP Dark 2", resultfile = "OSP Dark 2 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("OSP Dark 2", resultfile = "OSP Dark 2 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("OSP Dark 2", resultfile = "OSP Dark 2 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("OSP Dark 2", resultfile = "OSP Dark 2 H.csv",
                soundindex = "H")

multiple_sounds("OSP Dark 2", resultfile = "OSP Dark 2 NDSI.csv",
                soundindex = "ndsi")
####EWF####

#Dark 1 

multiple_sounds("EWF Dark 1", resultfile = "EWF Dark 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("EWF Dark 1", resultfile = "EWF Dark 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("EWF Dark 1", resultfile = "EWF Dark 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("EWF Dark 1", resultfile = "EWF Dark 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("EWF Dark 1", resultfile = "EWF Dark 1 H.csv",
                soundindex = "H")

multiple_sounds("EWF Dark 1", resultfile = "EWF Dark 1 NDSI.csv",
                soundindex = "ndsi")

#Light 1

multiple_sounds("EWF Light 1", resultfile = "EWF Light 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("EWF Light 1", resultfile = "EWF Light 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("EWF Light 1", resultfile = "EWF Light 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("EWF Light 1", resultfile = "EWF Light 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("EWF Light 1", resultfile = "EWF Light 1 H.csv",
                soundindex = "H")

multiple_sounds("EWF Light 1", resultfile = "EWF Light 1 NDSI.csv",
                soundindex = "ndsi")

#Dark 2
multiple_sounds("EWF Dark 2", resultfile = "EWF Dark 2 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("EWF Dark 2", resultfile = "EWF Dark 2 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("EWF Dark 2", resultfile = "EWF Dark 2 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("EWF Dark 2", resultfile = "EWF Dark 2 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("EWF Dark 2", resultfile = "EWF Dark 2 H.csv",
                soundindex = "H")

multiple_sounds("EWF Dark 2", resultfile = "EWF Dark 2 NDSI.csv",
                soundindex = "ndsi")

####FWF####

#Dark 1 

multiple_sounds("FWF Dark 1", resultfile = "FWF Dark 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("FWF Dark 1", resultfile = "FWF Dark 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("FWF Dark 1", resultfile = "FWF Dark 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("FWF Dark 1", resultfile = "FWF Dark 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("FWF Dark 1", resultfile = "FWF Dark 1 H.csv",
                soundindex = "H")

multiple_sounds("FWF Dark 1", resultfile = "FWF Dark 1 NDSI.csv",
                soundindex = "ndsi")

#Light 1

multiple_sounds("FWF Light 1", resultfile = "FWF Light 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("FWF Light 1", resultfile = "FWF Light 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("FWF Light 1", resultfile = "FWF Light 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("FWF Light 1", resultfile = "FWF Light 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("FWF Light 1", resultfile = "FWF Light 1 H.csv",
                soundindex = "H")

multiple_sounds("FWF Light 1", resultfile = "FWF Light 1 NDSI.csv",
                soundindex = "ndsi")

#Dark 2
multiple_sounds("FWF Dark 2", resultfile = "FWF Dark 2 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("FWF Dark 2", resultfile = "FWF Dark 2 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("FWF Dark 2", resultfile = "FWF Dark 2 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("FWF Dark 2", resultfile = "FWF Dark 2 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("FWF Dark 2", resultfile = "FWF Dark 2 H.csv",
                soundindex = "H")

multiple_sounds("FWF Dark 2", resultfile = "FWF Dark 2 NDSI.csv",
                soundindex = "ndsi")

####UBBG####

#Dark 1 

multiple_sounds("UBBG Dark 1", resultfile = "UBBG Dark 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("UBBG Dark 1", resultfile = "UBBG Dark 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("UBBG Dark 1", resultfile = "UBBG Dark 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("UBBG Dark 1", resultfile = "UBBG Dark 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("UBBG Dark 1", resultfile = "UBBG Dark 1 H.csv",
                soundindex = "H")

multiple_sounds("UBBG Dark 1", resultfile = "UBBG Dark 1 NDSI.csv",
                soundindex = "ndsi")

#Light 1

multiple_sounds("UBBG Light 1", resultfile = "UBBG Light 1 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("UBBG Light 1", resultfile = "UBBG Light 1 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("UBBG Light 1", resultfile = "UBBG Light 1 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("UBBG Light 1", resultfile = "UBBG Light 1 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("UBBG Light 1", resultfile = "UBBG Light 1 H.csv",
                soundindex = "H")

multiple_sounds("UBBG Light 1", resultfile = "UBBG Light 1 NDSI.csv",
                soundindex = "ndsi")

#Dark 2
multiple_sounds("UBBG Dark 2", resultfile = "UBBG Dark 2 ACI.csv",
                soundindex = "acoustic_complexity")

multiple_sounds("UBBG Dark 2", resultfile = "UBBG Dark 2 ADI.csv",
                soundindex = "acoustic_diversity")

multiple_sounds("UBBG Dark 2", resultfile = "UBBG Dark 2 AEI.csv",
                soundindex = "acoustic_evenness")

multiple_sounds("UBBG Dark 2", resultfile = "UBBG Dark 2 BI.csv",
                soundindex = "bioacoustic_index")

multiple_sounds("UBBG Dark 2", resultfile = "UBBG Dark 2 H.csv",
                soundindex = "H")

multiple_sounds("UBBG Dark 2", resultfile = "UBBG Dark 2 NDSI.csv",
                soundindex = "ndsi")

install.packages("lmerTest")
library(lmerTest)

data <- read.table("Light pollution data.txt", header=T, sep = "\t")
head(data)
data$Site <- as.factor(data$Site)

library(brms)

#Log10 and scale all acoustic indices
data$ACI_log10 <- log10(data$ACI)
data$ACI_Scaled <- scale(data$ACI_log10)
hist(data$ACI_Scaled)

data$ADI_log10 <- log10(data$ADI)
data$ADI_Scaled <- scale(data$ADI_log10)

data$BI_log10 <- log10(data$BI)
data$BI_Scaled <- scale(data$BI_log10)

data$H_log10 <- log10(data$H)
data$H_Scaled <- scale(data$H_log10)

data$NDSI_log10 <- log10(data$NDSI)
data$NDSI_Scaled <- scale(data$NDSI_log10)

fit <- brm(ACI_Scaled ~ Treatment + (1 | Site), data = data, family = student(), 
           prior = c(prior(normal(0, 10), class = "b"),
                     prior(normal(0, 10), class = "sd")),
           iter = 2000, warmup = 1000, chains = 4)
summary(fit)
print(fit$fit)
summary(fit)$fixed
summary(fit)$random
summary(fit)$sigma
summary(fit)$nu

# Install and load the emmeans package
install.packages("emmeans")
library(emmeans)

# Obtain the estimated marginal means for the Treatment variable
emm <- emmeans(fit, ~ Treatment)

# Perform pairwise comparisons
pairwise_comparisons <- pairs(emm)
summary(pairwise_comparisons)

library(bayesplot)
mcmc_trace(fit, pars = c("sigma", "nu"))

pp_check_results <- pp_check(fit)
head(pp_check_results)

pp_check_data <- pp_check_results$data

library(dplyr)
plot <- ggplot() +
  # Density plot for predicted values
  geom_density(data = pp_check_data %>% filter(is_y == FALSE),
               aes(x = value, group = rep_id), 
               linewidth = 1, alpha = 1, color = "lightblue") +
  # Density plot for observed values
  geom_density(data = pp_check_data %>% filter(is_y == TRUE),
               aes(x = value, group = rep_id),
               linewidth = 1, alpha = 0.01, color = "black") +
  labs(x = "Predicted Values",
       y = "Density") +
  coord_cartesian(xlim = c(-20, 20)) +  # Adjust x-axis limits
  theme_bw() +
  theme(legend.position = "none")

ggsave("Density plot.jpeg", plot = plot, width = 10, height = 7, dpi = 300, units = "in")
```

